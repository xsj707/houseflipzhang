# Zhang Dong Architecture - Cursor Rules

You are an expert full-stack developer working on the website for Zhang Dong Architecture, featuring residential design services in the Bay Area and beyond.

## Project Overview
- **Purpose**: Website showcasing residential design projects by Zhang Dong and his team
- **Tech Stack**: Next.js 16, React 19, Tailwind CSS, DaisyUI
- **Architecture**: App Router, API Routes, Server Components, Client Components
- **Content**: Homepage and project showcase pages featuring past architectural work
- **Database**: None - all assets managed locally
- **Authentication**: Single admin account (credentials stored in environment variables)
- **Admin**: One admin account for managing content, accessed via admin area
- **UI**: Tailwind CSS with DaisyUI components

## Code Style & Conventions

### File Structure
- Use App Router structure (`app/` directory)
- API routes in `app/api/[endpoint]/route.js`
- Components in `components/` directory
- Utilities/libs in `libs/` directory
- Models in `models/` directory
- Configuration in `config.js`

### Naming Conventions
- **Components**: PascalCase (e.g., `ButtonCheckout.js`, `HeaderBlog.js`)
- **API Routes**: kebab-case directories with `route.js` files
- **Utilities**: camelCase (e.g., `connectMongo`, `createCheckout`)
- **Constants**: UPPER_SNAKE_CASE
- **Variables**: camelCase

### Component Patterns
- Use `"use client"` directive for client components
- Import config from `@/config` for app-wide settings
- Use absolute imports with `@/` prefix
- Export default for single-purpose components
- Include descriptive comments for complex components

### API Route Structure
```javascript
import { NextResponse } from "next/server";
import { auth } from "@/libs/auth";

export async function POST(req) {
  try {
    const session = await auth();
    const body = await req.json();
    
    // Validation
    if (!body.requiredField) {
      return NextResponse.json(
        { error: "Required field is missing" },
        { status: 400 }
      );
    }
    
    // Logic here
    
    return NextResponse.json({ success: true });
  } catch (error) {
    console.error(error);
    return NextResponse.json(
      { error: "Something went wrong" },
      { status: 500 }
    );
  }
}
```

### Authentication
- Single admin account authentication using credentials from environment variables
- Admin credentials: `ADMIN_USERNAME` and `ADMIN_PASSWORD` (stored in `.env.local`)
- Use session-based authentication for admin area
- Protect admin routes by checking admin credentials
- Redirect unauthenticated users from admin area to login page

### Content Management
- All assets (images, content) are managed locally in the `public/` directory
- No database required - content is static or stored in local files
- Admin area allows managing/editing content through file system or local storage

## Best Practices

### Error Handling
- Always wrap async operations in try-catch blocks
- Return appropriate HTTP status codes
- Log errors to console for debugging
- Provide user-friendly error messages

### Security
- Validate all inputs in API routes
- Use environment variables for sensitive data
- Implement proper CORS headers where needed
- Sanitize user inputs before database operations

### Performance
- Use Server Components by default
- Only use Client Components when necessary (interactivity, hooks)
- Implement proper loading states
- Use Next.js Image component for optimized images
- Optimize static assets in `public/` directory

### UI/UX
- Use DaisyUI classes for consistent styling
- Implement loading states with DaisyUI spinners
- Use semantic HTML elements
- Ensure responsive design with Tailwind breakpoints
- Include proper accessibility attributes

## Environment Variables
Required environment variables:
- `ADMIN_USERNAME` - Admin account username (default: "Zhang")
- `ADMIN_PASSWORD` - Admin account password (stored securely, change when deployed)

Optional environment variables (for future features):
- `NEXTAUTH_SECRET` - Secret key for session management (if using NextAuth)
- `NEXTAUTH_URL` - Application URL for authentication
- `RESEND_API_KEY` - Resend email service API key (if using email features)
- `STRIPE_PUBLIC_KEY`, `STRIPE_SECRET_KEY`, `STRIPE_WEBHOOK_SECRET` - Stripe keys (if using payment features)

## Common Patterns

### Client Component with API Call
```javascript
"use client";
import { useState } from "react";
import apiClient from "@/libs/api";

const ComponentName = () => {
  const [isLoading, setIsLoading] = useState(false);
  
  const handleAction = async () => {
    setIsLoading(true);
    try {
      const response = await apiClient.post("/endpoint", data);
      // Handle success
    } catch (error) {
      console.error(error);
    } finally {
      setIsLoading(false);
    }
  };
  
  return (
    <button 
      className="btn btn-primary"
      onClick={handleAction}
      disabled={isLoading}
    >
      {isLoading ? (
        <span className="loading loading-spinner loading-xs"></span>
      ) : (
        "Action"
      )}
    </button>
  );
};
```

### Admin Authentication Check
```javascript
import { cookies } from "next/headers";

export async function isAdmin() {
  const cookieStore = await cookies();
  const sessionToken = cookieStore.get("admin-session");
  // Verify session token matches admin credentials
  return sessionToken?.value === process.env.ADMIN_PASSWORD;
}

export async function requireAdmin() {
  const admin = await isAdmin();
  if (!admin) {
    redirect("/admin/login");
  }
  return true;
}
```

## Configuration
- All app configuration is centralized in `config.js`
- Use `config.appName`, `config.domainName`, etc. throughout the app
- Stripe plans are defined in `config.stripe.plans`
- Email settings in `config.resend`
- Theme settings in `config.colors`

## Testing & Development
- Use `npm run dev` for development
- Use `npm run build` for production builds
- Follow conventional commit messages
- Test admin authentication flow
- Verify admin credentials are set in `.env.local`

## Deployment Considerations
- Set `ADMIN_USERNAME` and `ADMIN_PASSWORD` environment variables (change from defaults when deploying)
- Ensure all static assets are included in deployment
- No database setup required
- Configure domain in `config.js`

Remember to always check the existing codebase patterns before implementing new features to maintain consistency. 